<center>


<form action="/new" method="get">

<button>New Game</button>
</form>

<% if flash[:notice] %>
    <h2 class="notice" ><%= flash[:notice] %></h2>
<% else %>
    <h2 class="notice">Move When Ready</h2>
<% end %>

<% if !@game.whites_turn %>
<h1 style="background-color: black; width: 426px;">
<span class="black">Black's turn</span>
</h1>
<% else %>
<h1 style="background-color: lightgrey; width: 426px;">
<span class="white">White's turn</span>
</h1>
<% end %>

  
  <% (0..7).each do |n| %>
      <div class="col">
      
      <% 8.times do |i| %>
      
        <% if ((i + n) % 2 == 0) %>
      
        <div style="background-color:white;" 
        class="space" id="<%= n %>x<%= i %>y">
          <% piece = @game.board[n,i] %>
          <% if piece %>
            <span id="<%= piece.html %>"><%= piece %></span>
          <% end %>
        </div>
        <% else %>
      
        <div style="background-color:green;" 
        class="space" id="<%= n %>x<%= i %>y">
          <% piece = @game.board[n,i] %>
          <% if piece %>
            <span id="<%= piece.html %>"><%= piece %></span>
          <% end %>
        </div>
        <% end %>
        
      <% end %>


      </div>

  <% end %>
  

  </div>
  <br><br>
  
  <% if @game.whites_turn %>
  <h1 style="background-color: lightgrey; width: 431px;">
    <span class="white">White's turn</span>
  </h1>
  <% else %>
  <h1 style="background-color: black; width: 431px;">
    <span class="black">Black's turn</span>
  </h1>
  <% end %>
  
  <% if flash[:notice] %>
      <h2 class="notice"><%= flash[:notice] %></h2>
  <% else %>
      <h2 class="notice">Move When Ready</h2>
  <% end %>

  </center>


  

  <p>Your browser is given a new session token (encrypted in the cookie) for each new game - the game created in the database is given a matching token.  This token will ensure that with every request, the client is playing the game which they started.  The state of games are stringified, and saved to the database on every move.  As of now, the DB only knows where all the pieces are and whose turn it is.  It doesn't, for example, know if you've moved your king.  The logic for game is found in '/app/models'.</p>
  <h3>Session Token: <%= @s_id[0..10] %>...</h3>


  
